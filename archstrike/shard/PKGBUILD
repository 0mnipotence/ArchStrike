# Maintainer: ArchStrike <team@archstrike.org>

buildarch=1

pkgname=shard
pkgver=1.2
pkgrel=1
groups=('archstrike' 'archstrike-crackers')
arch=('any')
pkgdesc="A command line tool to detect shared passwords"
url="https://github.com/philwantsfish/shard"
license=('MIT')
depends=('java-environment' 'bash')
source=("https://github.com/philwantsfish/shard/releases/download/${pkgver}/${pkgname}-${pkgver}.jar" "LICENSE.md")
noextract=("${pkgname}-${pkgver}.jar")
sha512sums=('ce140cbaf9412369cde529a4fc095a7b440c9d4d8333e779ba2052f4b863b72da866433639019c95af6d0be7b4671de2d65a4ae4be7f5c22f7e8ecc4f1616303'
            'cce994c12eee0dbdd1011ca13bbe6e2e2a9d08c3b1d685765d81f9ff43bf3c340508bbd8658eed7297096c9363f217a0e1494fc841b080253757431b0545ce3c')

package() {
  install -dm755 "${pkgdir}/usr/bin"
  install -dm755 "${pkgdir}/usr/share/${pkgname}"
  install -dm755 "${pkgdir}/usr/share/licenses/${pkgname}"

  install -Dm755 "${srcdir}/${pkgname}-${pkgver}.jar" "${pkgdir}/usr/share/${pkgname}"
  install -Dm644 ${srcdir}/LICENSE.md "${pkgdir}/usr/share/licenses/${pkgname}"

cat > "${pkgdir}/usr/bin/${pkgname}" <<EOF
#!/bin/sh
cd /usr/share/${pkgname}
java -jar ${pkgname}-${pkgver}.jar "\$@"
EOF
chmod 755 "${pkgdir}/usr/bin/${pkgname}"
}
