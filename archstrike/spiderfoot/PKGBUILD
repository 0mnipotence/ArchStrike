# Maintainer: ArchStrike <team@archstrike.org>

buildarch=1

pkgname=spiderfoot
pkgver=2.6.1
pkgrel=2
groups=('archstrike' 'archstrike-recon')
pkgdesc="The Open Source Footprinting Tool"
url='http://spiderfoot.net'
arch=('any')
license=('GPL2')
depends=('python2-lxml' 'python2-mako' 'python2-cherrypy' 'python2-m2crypto' 'python2-netaddr')
source=("http://downloads.sourceforge.net/project/${pkgname}/${pkgname}-${pkgver}-src.tar.gz")
sha512sums=('96f1f38937f3f6509f344e725fb79c56835270228747c4d6fb5cef897ab1ea398ca7a3c99c8be2c10dd31008969d3bb9d4313e498ac6e44f734faea6ff2b8f34')

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"

  # Base directories.
  install -dm755 "${pkgdir}/usr/bin"
  install -dm755 "${pkgdir}/usr/share/${pkgname}"

  cp -R ./ "${pkgdir}/usr/share/${pkgname}"
  sed -i 's|python|python2|' ${pkgdir}/usr/share/${pkgname}/sf.py
  cat > "$pkgdir/usr/bin/spiderfoot" << EOF
#!/bin/sh
cd /usr/share/spiderfoot
./sf.py
EOF
  chmod +x "$pkgdir/usr/bin/spiderfoot"
}
