# Maintainer: ArchStrike <team@archstrike.org>

buildarch=1

pkgname=hash-identifier
pkgver=1.1
pkgrel=3
groups=('archstrike' 'archstrike-crypto')
pkgdesc="Identifies the different types of hashes used to encrypt data, especially passwords"
arch=('any')
url='http://code.google.com/p/hash-identifier'
license=('GPL3')
makedepends=('subversion' 'dos2unix')
depends=('python2')
source=("$pkgname::https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/hash-identifier/Hash_ID_v$pkgver.py")
sha512sums=('SKIP')

prepare() {
  grep -iRl 'python' "$pkgname" | xargs sed -i 's|python$|python2|'
}

package() {
  install -dm755 "$pkgdir/usr/bin"
  install -dm755 "$pkgdir/usr/share/$pkgname"
  cp $pkgname "$pkgdir/usr/share/$pkgname"

cat > "$pkgdir/usr/bin/hashid" <<EOF
#!/bin/sh
cd /usr/share/$pkgname
python2 $pkgname "\$@"
EOF
chmod 755 "$pkgdir/usr/bin/hashid"
}

