# Maintainer: ArchStrike <team@archstrike.org>

buildarch=220

pkgname=ipscan
pkgver=3.5.5
pkgrel=1
pkgdesc="Angry IP scanner is a very fast IP address and port scanner."
arch=('armv6h' 'armv7h' 'i686' 'x86_64' 'aarch64')
groups=('archstrike' 'archstrike-scanners')
license=('GPL2')
url="http://www.angryziber.com"
depends=('java-runtime>=7')
source=()
source_i686+=("http://downloads.sourceforge.net/project/ipscan/ipscan3-binary/$pkgver/ipscan-linux-$pkgver.jar")
source_x86_64+=("http://downloads.sourceforge.net/project/ipscan/ipscan3-binary/$pkgver/ipscan-linux64-$pkgver.jar")
sha512sums_i686=('e4b097a055a839e157471f834dbc61bb38a25c0a6c06380ad1505d14933f5367aa58166a772087740f418abcd7c4a222a44cd9fbe7798b336c0bb2dac31a9860')
sha512sums_x86_64=('fe60a73f5b7d5ff69e52264b2840b563bcbfc8613c256974a52a15b64c79150741c90901b55991dbced5c22496e71459a1e23cb25378a415c2fa8f312bc7d7ff')

package() {
  cd $srcdir
  [[ $CARCH == "i686" ]] && _SRC=ipscan-linux-$pkgver.jar
  [[ $CARCH == "x86_64" ]] && _SRC=ipscan-linux64-$pkgver.jar
  _DST="$pkgdir/usr/share/java/ipscan/$_SRC"
  _BIN="$pkgdir/usr/bin/ipscan"
  install -dm755 $pkgdir/usr/bin
  install -dm644 $pkgdir/usr/share/java/ipscan
  cat > "$_BIN" << EOF
#!/usr/bin/env sh
java -jar /usr/share/java/ipscan/$_SRC "$@"
EOF
  chmod 755 "$_BIN"
  install -Dm644 $_SRC $_DST
}
