# Maintainer: ArchStrike <team@archstrike.org>

buildarch=212

pkgname=rfcat
pkgver=130515
pkgrel=2
groups=('archstrike' 'archstrike-exploit')
pkgdesc="RF ChipCon-based Attack Toolset"
url="http://code.google.com/p/rfcat"
arch=('i686' 'x86_64' 'armv6h' 'armv7h')
license=('BSD')
depends=('python2' 'python2-pyusb' 'python' 'ipython')
source=("http://rfcat.googlecode.com/files/rfcat_$pkgver.tgz")
sha512sums=('c131533e67465b987b807ac8bf98bb68f0a29b4be56eb0657290b3d0891fb51f798f282750f5ab7ca856f3ba411b23b83e08b08ab4bf76bdc42f072f5320d6a2')

package() {
  cd "$srcdir/rfcat_$pkgver"

  # Base directories.
  install -dm755 "$pkgdir/usr/share/rfcat"
  install -dm755 "$pkgdir/usr/bin/"
  install -dm755 "$pkgdir/usr/share/licenses/$pkgname"
  
  install -Dm644 LICENSE "$pkgdir/usr/share/licenses/$pkgname"

 cp -a * "$pkgdir/usr/share/rfcat"

cat > "$pkgdir/usr/bin/rfcat" << EOF
#!/bin/sh
cd /usr/share/rfcat
python2 rfcat "\$@"
EOF
chmod +x "$pkgdir/usr/bin/rfcat"
}
